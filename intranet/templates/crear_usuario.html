{% extends 'base.html' %}

{% block content %}
<header class="header">
    <h1><i class="fas fa-user-plus"></i> Crear Nuevo Usuario</h1>
</header>

<section class="content-box">
    {% if error %}
    <div style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px;">
        <i class="fas fa-exclamation-triangle"></i> {{ error }}
    </div>
    {% endif %}

    <form method="POST" class="form-container">
        {% csrf_token %}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="username">Nombre de Usuario *</label>
                <input type="text" id="username" name="username" required 
                       placeholder="Ej: jperez" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            
            <div class="form-group">
                <label for="password">Contraseña *</label>
                <input type="password" id="password" name="password" required 
                       placeholder="Mínimo 8 caracteres" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            
            <div class="form-group">
                <label for="first_name">Nombre *</label>
                <input type="text" id="first_name" name="first_name" required 
                       placeholder="Ej: Juan" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            
            <div class="form-group">
                <label for="last_name">Apellido *</label>
                <input type="text" id="last_name" name="last_name" required 
                       placeholder="Ej: Pérez" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            
            <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" id="email" name="email" 
                       placeholder="Ej: jperez@cesfam.cl" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            
            <div class="form-group">
                <label for="id_unidad">Unidad / Departamento *</label>
                <select id="id_unidad" name="id_unidad" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    <option value="">Seleccione una unidad...</option>
                    {% for unidad in unidades %}
                    <option value="{{ unidad.pk }}">{{ unidad.nombre_unidad }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="id_rol">Rol *</label>
                <select id="id_rol" name="id_rol" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    <option value="">Seleccione un rol...</option>
                    {% for rol in roles %}
                    <option value="{{ rol.pk }}">{{ rol.nombre_rol }} (Nivel {{ rol.nivel_jerarquico }})</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group" style="display: flex; align-items: center; gap: 10px; padding-top: 25px;">
                <input type="checkbox" id="es_jefe_unidad" name="es_jefe_unidad" style="width: 20px; height: 20px;">
                <label for="es_jefe_unidad" style="margin: 0;">¿Es Jefe de Unidad?</label>
            </div>
        </div>
        
        <div style="margin-top: 30px; display: flex; gap: 15px;">
            <button type="submit" class="action-button">
                <i class="fas fa-save"></i> Crear Usuario
            </button>
            <a href="{% url 'gestion_usuarios' %}" class="action-button" style="background-color: #7f8c8d; text-decoration: none;">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>
    </form>
</section>
{% endblock %}

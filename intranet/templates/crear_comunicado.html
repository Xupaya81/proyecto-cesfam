{% extends 'base.html' %}

{% block content %}
<header class="header">
    <h1>Publicar Nuevo Comunicado</h1>
</header>

<section class="content-box">
    <h2>Redactar Mensaje Oficial</h2>
    
    {% if es_subdireccion %}
        <p>Este mensaje puede ser global (visible para todos) o dirigido a una unidad espec√≠fica.</p>
    {% else %}
        <p>Este mensaje ser√° visible solo para los funcionarios de tu unidad: <strong>{{ unidad_usuario.nombre_unidad }}</strong></p>
    {% endif %}

    <form class="form-container" method="POST">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="titulo">T√≠tulo del Comunicado</label>
            <input type="text" id="titulo" name="titulo" placeholder="Ej: Suspensi√≥n de actividades por Fiestas Patrias" required>
        </div>

        <div class="form-group">
            <label for="cuerpo">Cuerpo del Mensaje</label>
            <textarea id="cuerpo" name="cuerpo" rows="6" placeholder="Escriba aqu√≠ el detalle del comunicado..." required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Roboto', sans-serif;"></textarea>
        </div>
        
        {% if es_subdireccion %}
        <div class="form-group">
            <label for="unidad_destino">Destino del Comunicado</label>
            <select id="unidad_destino" name="unidad_destino" style="padding: 12px; border: 1px solid #ddd; border-radius: 6px; width: 100%;">
                <option value="">üåê Global (Todos los funcionarios)</option>
                {% for unidad in unidades %}
                <option value="{{ unidad.pk }}">üìç {{ unidad.nombre_unidad }}</option>
                {% endfor %}
            </select>
            <small style="color: #666;">Si eliges Global, todos los funcionarios ver√°n el comunicado.</small>
        </div>
        {% endif %}
        
        <button type="submit" class="action-button">
            Publicar Comunicado
        </button>
    </form>
</section>
{% endblock %}